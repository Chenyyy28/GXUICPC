"use strict";(self["webpackChunkmanage"]=self["webpackChunkmanage"]||[]).push([[680],{9680:function(e,t,l){l.r(t),l.d(t,{default:function(){return w}});var a=l(6768),o=l(4232);const n={style:{"text-align":"center","margin-bottom":"10px",position:"relative"}},r={key:2},i={key:3},d={class:"dialog-footer"},u={class:"dialog-footer"},s={class:"dialog-footer"},c={key:0},m={key:1},p={key:2};function k(e,t,l,k,b,h){const f=(0,a.g2)("el-button"),g=(0,a.g2)("el-input"),F=(0,a.g2)("el-date-picker"),V=(0,a.g2)("el-form-item"),C=(0,a.g2)("el-option"),v=(0,a.g2)("el-select"),y=(0,a.g2)("el-form"),w=(0,a.g2)("el-dialog"),_=(0,a.g2)("el-table-column"),I=(0,a.g2)("el-table"),x=(0,a.g2)("el-pagination"),A=(0,a.g2)("el-main");return(0,a.uX)(),(0,a.Wv)(A,{class:"main"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",n,[(0,a.bF)(g,{modelValue:k.contestName,"onUpdate:modelValue":t[0]||(t[0]=e=>k.contestName=e),style:{"max-width":"600px"},placeholder:"Please input",class:"input-with-select"},{append:(0,a.k6)((()=>[(0,a.bF)(f,{icon:"Search",onClick:k.doSearch},null,8,["onClick"])])),_:1},8,["modelValue"]),k.isAdmin?((0,a.uX)(),(0,a.Wv)(f,{key:"",type:"primary",onClick:t[1]||(t[1]=e=>{k.dialogVisible=!0,k.isAdd=!0}),text:"",bg:"",style:{"margin-left":"10px"}},{default:(0,a.k6)((()=>t[21]||(t[21]=[(0,a.eW)(" +新增训练 ")]))),_:1})):(0,a.Q3)("",!0),t[22]||(t[22]=(0,a.Lk)("span",{style:{"margin-left":"10px"}},"排名计算区间：",-1)),k.isAdmin?((0,a.uX)(),(0,a.Wv)(F,{key:1,style:{"margin-left":"10px"},modelValue:k.timeInterval,"onUpdate:modelValue":t[2]||(t[2]=e=>k.timeInterval=e),type:"daterange","unlink-panels":"","range-separator":"|","start-placeholder":"Start date","end-placeholder":"End date",shortcuts:e.shortcuts,size:e.size,format:"YYYY/MM/DD","value-format":"x",onChange:k.updateTime},null,8,["modelValue","shortcuts","size","onChange"])):(0,a.Q3)("",!0),0==k.isAdmin?((0,a.uX)(),(0,a.CE)("span",r,(0,o.v_)(k.start)+" 到 ",1)):(0,a.Q3)("",!0),0==k.isAdmin?((0,a.uX)(),(0,a.CE)("span",i,(0,o.v_)(k.end),1)):(0,a.Q3)("",!0)]),(0,a.bF)(w,{style:{"text-align":"center"},modelValue:k.dialogVisible,"onUpdate:modelValue":t[10]||(t[10]=e=>k.dialogVisible=e),title:"输入用户信息",width:"500","before-close":k.handleClose},{footer:(0,a.k6)((()=>[(0,a.Lk)("div",d,[(0,a.bF)(f,{onClick:k.cancelForm},{default:(0,a.k6)((()=>t[23]||(t[23]=[(0,a.eW)("取消")]))),_:1},8,["onClick"]),(0,a.bF)(f,{type:"primary",onClick:k.submit},{default:(0,a.k6)((()=>t[24]||(t[24]=[(0,a.eW)(" 提交 ")]))),_:1},8,["onClick"])])])),default:(0,a.k6)((()=>[(0,a.bF)(y,{style:{"max-width":"400px",margin:"0 auto"},model:k.contestForm,"status-icon":"","label-width":"auto",class:"demo-ruleForm"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{label:"训练描述",prop:"description"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{modelValue:k.contestForm.description,"onUpdate:modelValue":t[3]||(t[3]=e=>k.contestForm.description=e)},null,8,["modelValue"])])),_:1}),(0,a.bF)(V,{label:"链接",prop:"url"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{modelValue:k.contestForm.url,"onUpdate:modelValue":t[4]||(t[4]=e=>k.contestForm.url=e)},null,8,["modelValue"])])),_:1}),(0,a.bF)(V,{label:"训练面向人群",prop:"roleId"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{modelValue:k.contestForm.roleId,"onUpdate:modelValue":t[5]||(t[5]=e=>k.contestForm.roleId=e),placeholder:"请选择对象",style:{width:"240px"}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(k.roleOptions,(e=>((0,a.uX)(),(0,a.Wv)(C,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(V,{label:"拉题人/出题人",prop:"author"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{modelValue:k.contestForm.author,"onUpdate:modelValue":t[6]||(t[6]=e=>k.contestForm.author=e)},null,8,["modelValue"])])),_:1}),(0,a.bF)(V,{label:"计算权重",prop:"weight"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{modelValue:k.contestForm.weight,"onUpdate:modelValue":t[7]||(t[7]=e=>k.contestForm.weight=e)},null,8,["modelValue"])])),_:1}),(0,a.bF)(V,{label:"开始时间",prop:"startTime"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{modelValue:k.contestForm.startTime,"onUpdate:modelValue":t[8]||(t[8]=e=>k.contestForm.startTime=e),type:"datetime",placeholder:"请选择开始时间",format:"YYYY/MM/DD HH:mm:ss","value-format":"x"},null,8,["modelValue"])])),_:1}),(0,a.bF)(V,{label:"结束时间",prop:"endTime"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{modelValue:k.contestForm.endTime,"onUpdate:modelValue":t[9]||(t[9]=e=>k.contestForm.endTime=e),type:"datetime",placeholder:"请选择结束时间",format:"YYYY/MM/DD HH:mm:ss","value-format":"x"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","before-close"]),(0,a.bF)(w,{style:{"text-align":"center"},modelValue:k.rankVisible,"onUpdate:modelValue":t[14]||(t[14]=e=>k.rankVisible=e),title:"输入用户信息",width:"500","before-close":k.handleClose},{footer:(0,a.k6)((()=>[(0,a.Lk)("div",u,[(0,a.bF)(f,{onClick:k.cancelForm},{default:(0,a.k6)((()=>t[25]||(t[25]=[(0,a.eW)("取消")]))),_:1},8,["onClick"]),(0,a.bF)(f,{type:"primary",onClick:k.submitRank},{default:(0,a.k6)((()=>t[26]||(t[26]=[(0,a.eW)(" 提交 ")]))),_:1},8,["onClick"])])])),default:(0,a.k6)((()=>[(0,a.bF)(y,{style:{"max-width":"400px",margin:"0 auto"},model:k.rankForm,"status-icon":"","label-width":"auto",class:"demo-ruleForm"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{label:"现场出题数",prop:"raceNum"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{modelValue:k.rankForm.raceNum,"onUpdate:modelValue":t[11]||(t[11]=e=>k.rankForm.raceNum=e)},null,8,["modelValue"])])),_:1}),(0,a.bF)(V,{label:"现场排名",prop:"ranking"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{modelValue:k.rankForm.ranking,"onUpdate:modelValue":t[12]||(t[12]=e=>k.rankForm.ranking=e)},null,8,["modelValue"])])),_:1}),(0,a.bF)(V,{label:"补题数",prop:"supplement"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{modelValue:k.rankForm.supplement,"onUpdate:modelValue":t[13]||(t[13]=e=>k.rankForm.supplement=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","before-close"]),(0,a.bF)(w,{style:{"text-align":"center"},modelValue:k.contestInfoVisible,"onUpdate:modelValue":t[15]||(t[15]=e=>k.contestInfoVisible=e),title:"排名",width:"500"},{default:(0,a.k6)((()=>[(0,a.bF)(I,{data:k.rankInfo,style:{width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(_,{prop:"ranking",label:"排名",width:"100"}),(0,a.bF)(_,{prop:"username",label:"姓名",width:"100"}),(0,a.bF)(_,{prop:"raceNum",label:"现场出题"}),(0,a.bF)(_,{prop:"supplement",label:"补题"})])),_:1},8,["data"])])),_:1},8,["modelValue"]),(0,a.bF)(w,{style:{"text-align":"center"},modelValue:k.noticeVis,"onUpdate:modelValue":t[18]||(t[18]=e=>k.noticeVis=e),title:"输入邮件信息",width:"500","before-close":k.handleClose},{footer:(0,a.k6)((()=>[(0,a.Lk)("div",s,[(0,a.bF)(f,{onClick:k.cancelForm},{default:(0,a.k6)((()=>t[27]||(t[27]=[(0,a.eW)("取消")]))),_:1},8,["onClick"]),(0,a.bF)(f,{type:"primary",onClick:k.noticeContest},{default:(0,a.k6)((()=>t[28]||(t[28]=[(0,a.eW)(" 提交 ")]))),_:1},8,["onClick"])])])),default:(0,a.k6)((()=>[(0,a.bF)(y,{style:{"max-width":"400px",margin:"0 auto"},model:k.noticeForm,"status-icon":"","label-width":"auto"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{label:"标题",prop:"subject"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{modelValue:k.noticeForm.subject,"onUpdate:modelValue":t[16]||(t[16]=e=>k.noticeForm.subject=e)},null,8,["modelValue"])])),_:1}),(0,a.bF)(V,{label:"内容",prop:"content"},{default:(0,a.k6)((()=>[(0,a.bF)(g,{modelValue:k.noticeForm.content,"onUpdate:modelValue":t[17]||(t[17]=e=>k.noticeForm.content=e),type:"textarea",rows:12},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","before-close"]),(0,a.bF)(I,{data:k.state.tableData,stripe:"",style:{width:"100%"}},{default:(0,a.k6)((()=>[(0,a.bF)(_,{prop:"description",label:"训练描述",width:"200"}),(0,a.bF)(_,{prop:"url",label:"链接"}),(0,a.bF)(_,{prop:"author",label:"作者",width:"100"}),(0,a.bF)(_,{prop:"roleId",label:"面向人群",width:"100"},{default:(0,a.k6)((e=>[1==e.row.roleId?((0,a.uX)(),(0,a.CE)("span",c,"现役")):(0,a.Q3)("",!0),2==e.row.roleId?((0,a.uX)(),(0,a.CE)("span",m,"预备役")):(0,a.Q3)("",!0),-1==e.row.roleId?((0,a.uX)(),(0,a.CE)("span",p,"全部")):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(_,{prop:"weight",label:"计算权重",width:"100"}),(0,a.bF)(_,{prop:"startTime",formatter:k.dateFormat,label:"开始时间",width:"150"},null,8,["formatter"]),(0,a.bF)(_,{prop:"endTime",formatter:k.dateFormat,label:"结束时间",width:"150"},null,8,["formatter"]),(0,a.bF)(_,{prop:"createTime",formatter:k.dateFormat,label:"创建时间",width:"150"},null,8,["formatter"]),(0,a.bF)(_,{label:"操作",width:"300"},{default:(0,a.k6)((e=>[k.isAdmin?((0,a.uX)(),(0,a.Wv)(f,{key:"",type:"success",text:"",bg:"",onClick:t=>k.beforeNoticeContest(e.row)},{default:(0,a.k6)((()=>t[29]||(t[29]=[(0,a.eW)(" 提醒 ")]))),_:2},1032,["onClick"])):(0,a.Q3)("",!0),k.isAdmin?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(f,{key:"",type:"success",text:"",bg:"",onClick:t=>k.queryRank(e.row)},{default:(0,a.k6)((()=>t[30]||(t[30]=[(0,a.eW)(" 详情 ")]))),_:2},1032,["onClick"])),k.isAdmin?((0,a.uX)(),(0,a.Wv)(f,{key:"",type:"success",text:"",bg:"",onClick:t=>k.beforeUpdateContest(e.row)},{default:(0,a.k6)((()=>t[31]||(t[31]=[(0,a.eW)(" 编辑 ")]))),_:2},1032,["onClick"])):(0,a.Q3)("",!0),k.isAdmin?((0,a.uX)(),(0,a.Wv)(f,{key:"",onClick:t=>k.deleteUser(e.row.id),type:"danger",text:"",bg:""},{default:(0,a.k6)((()=>t[32]||(t[32]=[(0,a.eW)(" 删除 ")]))),_:2},1032,["onClick"])):(0,a.Q3)("",!0),k.isAdmin?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(f,{key:"",onClick:t=>k.addRankInfo(e.row.id),type:"primary",text:"",bg:""},{default:(0,a.k6)((()=>t[33]||(t[33]=[(0,a.eW)(" 填写信息 ")]))),_:2},1032,["onClick"]))])),_:1})])),_:1},8,["data"]),(0,a.bF)(x,{"current-page":k.currentPage,"onUpdate:currentPage":t[19]||(t[19]=e=>k.currentPage=e),"page-size":k.pageSize,"onUpdate:pageSize":t[20]||(t[20]=e=>k.pageSize=e),"page-sizes":[100,200,300,400],layout:"total, sizes, prev, pager, next, jumper",total:k.total,onSizeChange:k.handleSizeChange,onCurrentChange:k.handleCurrentChange,style:{"margin-top":"10px"}},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])),_:1})}var b=l(4373),h=l(1219),f=l(2933),g=l(9148),F=l.n(g),V=l(144),C={setup(){let e=(0,V.Kh)({tableData:[]}),t=(0,V.KR)(),l=(0,V.KR)();const o=(0,V.KR)(1),n=(0,V.KR)(100),r=(0,V.KR)(1),i=(0,V.KR)(),d=(0,V.KR)("-1"),u=(0,V.KR)(!1),s=(0,V.KR)(!0),c=(0,V.KR)(!1),m=(0,V.KR)(!0),p=(0,V.KR)(!1),k=(0,V.KR)(!1),g=(0,V.KR)(),C=(0,V.KR)(!1),v=(0,V.Kh)({});let y=(0,V.KR)(),w=(0,V.KR)(),_=(0,V.Kh)({});const I=(0,V.Kh)([{value:1,label:"现役"},{value:2,label:"预备役"},{value:-1,label:"全部"}]);let x=(0,V.Kh)({id:0,description:"",url:"",roleId:"",author:"",weight:"50",startTime:"",endTime:""}),A=(0,V.Kh)({contestId:"",userId:"",raceNum:"",ranking:"",supplement:""});function K(e,t){var l=e[t.property];return void 0==l?"":F()(l).format("YYYY-MM-DD HH:mm:ss")}function R(e){n.value=e,(0,a.dY)((()=>{W()}))}function T(e){o.value=e,(0,a.dY)((()=>{W()}))}const U=function(){_=JSON.parse(localStorage.getItem("user")),b.A.get("/url/contest",{params:{currentPage:o.value,pageSize:n.value,contestName:""===i.value?null:i.value,roleId:_.roleId}}).then((e=>e.data)).then((e=>e.data)).then((t=>{e.tableData=t.list,r.value=t.total})).catch((e=>{console.log(e),h.nk.error("用户列表获取失败")}))};function W(){(0,a.dY)((()=>{U()}))}const S=e=>{e(),Y()};function Y(){x.id=0,x.description="",x.url="",x.roleId="",x.weight="50",x.startTime="",x.endTime=""}function z(){u.value=!1,1==c.value?D():L()}function D(){b.A.post("/url/contest",x).then((e=>e.data)).then((e=>{200==e.code?(h.nk.success("添加成功"),location.reload()):h.nk.error("添加失败")})).catch((e=>{console.log(e),h.nk.error("添加失败")})).finally((()=>{Y()}))}function X(e){f.s.confirm("危险操作，确认删除吗","danger",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{b.A.delete("/url/contest",{params:{id:e}}).then((e=>e.data)).then((e=>e.data)).then((e=>{(0,h.nk)({type:"error",message:"删除成功"}),location.reload()})).catch((e=>{(0,h.nk)({type:"info",message:"取消成功"})}))})).catch((()=>{(0,h.nk)({type:"info",message:"取消成功"})}))}function N(e){x.id=e.id,x.description=e.description,x.url=e.url,x.roleId=e.roleId,x.author=e.author,x.weight=e.weight,x.startTime=e.startTime,x.endTime=e.endTime}function Q(e){u.value=!0,c.value=!1,N(e)}function L(){b.A.put("/url/contest",x).then((e=>e.data)).then((e=>{200==e.code?(h.nk.success("修改成功"),location.reload()):h.nk.error("修改失败")})).catch((e=>{console.log(e),h.nk.error("修改失败")})).finally((()=>{Y()}))}function M(e){A.contestId=e,A.userId=_.id,p.value=!0}function E(){b.A.post("/url/rank",A).then((e=>e.data)).then((e=>{200==e.code?h.nk.success("添加成功"):h.nk.error("添加失败")})).catch((e=>{h.nk.error("添加失败")})),p.value=!1,P()}function P(){A.ranking="",A.raceNum="",A.supplement=""}function H(){Y(),P(),u.value=!1,p.value=!1}function j(){b.A.put("/url/time",w.value).then((e=>e.data)).then((e=>{200==e.code?h.nk.success("修改时间区间成功"):h.nk.error("修改时间区间失败")})).catch((e=>{h.nk.error("修改时间区间失败")}))}function O(){b.A.get("/url/time").then((e=>e.data)).then((e=>{this.timeInterval=e.data,this.start=new Date(this.timeInterval[0]).toLocaleDateString(),this.end=new Date(this.timeInterval[1]).toLocaleDateString()})).catch((e=>{console.log(e)}))}function q(e){k.value=!0,b.A.get("/url/rank/info",{params:{contestId:e.id}}).then((e=>e.data)).then((e=>{200==e.code&&(this.rankInfo=e.data)})).catch((e=>{console.log(e)}))}function B(e){C.value=!0,v.contestId=e.id,console.log(v)}function J(){b.A.post("/url/contest/notice",v).then((e=>e.data)).then((e=>{200==e.code?(h.nk.success("提醒成功"),C.value=!1):h.nk.error("提醒失败")})).catch((e=>{console.log(e),h.nk.error("提醒失败")}))}return{state:e,dateFormat:K,currentPage:o,pageSize:n,contestName:i,role:d,total:r,handleSizeChange:R,handleCurrentChange:T,getContestLists:U,doSearch:W,dialogVisible:u,handleClose:S,contestForm:x,submit:z,resetContestForm:Y,needPassword:s,deleteUser:X,updateContest:L,beforeUpdateContest:Q,cancelForm:H,isAdd:c,isAdmin:m,rankVisible:p,rankForm:A,resetRankForm:P,roleOptions:I,user:_,submitRank:E,addRankInfo:M,timeInterval:w,updateTime:j,getTime:O,start:t,end:l,rankInfo:y,contestInfoVisible:k,queryRank:q,noticeContest:J,beforeNoticeContest:B,noticeTxt:g,noticeVis:C,noticeForm:v}},beforeCreate(){this.user=JSON.parse(localStorage.getItem("user")),0==this.user.roleId?this.isAdmin=!0:this.isAdmin=!1,this.getContestLists(),this.getTime()}},v=l(1241);const y=(0,v.A)(C,[["render",k]]);var w=y}}]);
//# sourceMappingURL=680.0c8c9a25.js.map