{"ast":null,"code":"import axios from 'axios';\nimport { ElMessage } from 'element-plus';\nimport { reactive, ref } from 'vue';\nexport default {\n  setup() {\n    let dialogVisible = ref(false);\n    const currentPage = ref(1);\n    const pageSize = ref(100);\n    const total = ref(1);\n    const contestName = ref('');\n    let user = reactive({});\n    const contestForm = reactive({\n      contestName: '',\n      url: ''\n    });\n    let state = reactive({\n      tableData: []\n    });\n    function getContest() {\n      console.log(21313);\n      axios.get('/url/uncontested', {\n        params: {\n          userId: user.id,\n          currentPage: currentPage.value,\n          pageSize: pageSize.value,\n          contestName: contestName.value === '' ? null : contestName.value\n        }\n      }).then(res => res.data).then(res => res.data).then(res => {\n        state.tableData = res.list;\n        total.value = res.total;\n      }).catch(err => {\n        console.log(err);\n        ElMessage.error(\"获取补题列表失败\");\n      });\n    }\n    function getUser() {\n      return new Promise(() => {\n        user = JSON.parse(localStorage.getItem('user'));\n        console.log(user);\n      });\n    }\n    return {\n      contestForm,\n      state,\n      dialogVisible,\n      currentPage,\n      pageSize,\n      total,\n      contestName,\n      user,\n      getContest,\n      getUser\n    };\n  },\n  created() {\n    this.getUser();\n    this.user = JSON.parse(localStorage.getItem('user'));\n    this.getContest();\n  }\n};","map":{"version":3,"names":["axios","ElMessage","reactive","ref","setup","dialogVisible","currentPage","pageSize","total","contestName","user","contestForm","url","state","tableData","getContest","console","log","get","params","userId","id","value","then","res","data","list","catch","err","error","getUser","Promise","JSON","parse","localStorage","getItem","created"],"sources":["C:\\Users\\18725\\Desktop\\集训队管理系统开发\\manage\\front\\manage\\src\\components\\HomePage.vue"],"sourcesContent":["<template>\r\n    <el-main class=\"main\">\r\n        <div class=\"mainBody\">\r\n            <div class=\"left\">\r\n                <div>\r\n                    <div>\r\n                        <el-avatar style=\"display:block; margin: 0 auto;margin-top:10%\" :size=\"200\" :src=\"circleUrl\" />\r\n                    </div>\r\n                    <div\r\n                        style=\"position:relative;width:200px;margin:0 auto;margin-top:20px ;text-align: center; border-bottom:solid black 1px\">\r\n                        <el-icon style=\"position: absolute;left:0\">\r\n                            <UserFilled />\r\n                        </el-icon>\r\n                        {{ user.username }}\r\n                    </div>\r\n                    <div\r\n                        style=\" position:relative;width:200px ;margin:0 auto;margin-top:20px ;text-align: center; border-bottom:solid black 1px\">\r\n                        <el-icon style=\"position: absolute;left:0\">\r\n                            <Message />\r\n                        </el-icon>\r\n                        {{ user.email }}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"right\">\r\n                <div class=\"text\"></div>\r\n\r\n                <div style=\"height: 10%;min-height:60px;text-align:center;margin-top:10%\">\r\n                    <h2>未补题记录</h2>\r\n                    <div style=\"margin-bottom: 10px;margin-top:10px; position:relative\">\r\n                        <el-input v-model=\"contestName\" style=\"max-width: 600px\" placeholder=\"Please input\"\r\n                            class=\"input-with-select\">\r\n                            <template #append>\r\n                                <el-button icon=\"Search\" @click=\"doSearch\" />\r\n                            </template>\r\n                        </el-input>\r\n                        <el-button key type=\"primary\" @click=\"dialogVisible = true; needPassword = false\" text bg\r\n                            style=\"margin-left:10px\">\r\n                            +新增补题\r\n                        </el-button>\r\n                    </div>\r\n\r\n                    <el-dialog style=\"text-align: center;\" v-model=\"dialogVisible\" title=\"输入补题信息\" width=\"500\"\r\n                        :before-close=\"handleClose\">\r\n                        <el-form style=\"max-width: 400px;margin:0 auto\" :model=\"contestForm\" status-icon\r\n                            label-width=\"auto\" class=\"demo-ruleForm\">\r\n                            <el-form-item label=\"场次名\" prop=\"contestName\">\r\n                                <el-input v-model=\"contestForm.contestName\" />\r\n                            </el-form-item>\r\n                            <el-form-item label=\"链接\" prop=\"url\">\r\n                                <el-input v-model=\"contestForm.url\" />\r\n                            </el-form-item>\r\n                        </el-form>\r\n                        <template #footer>\r\n                            <div class=\"dialog-footer\">\r\n                                <el-button @click=\"cancelForm\">取消</el-button>\r\n                                <el-button type=\"primary\" @click=\"submit\">\r\n                                    提交\r\n                                </el-button>\r\n                            </div>\r\n                        </template>\r\n                    </el-dialog>\r\n                    <el-table :data=\"state.tableData\" stripe style=\"width: 100%\">\r\n                        <el-table-column prop=\"contestName\" label=\"场次名\" width=\"300\" />\r\n                        <el-table-column prop=\"url\" label=\"链接\" />\r\n                        <el-table-column label=\"操作\" width=\"100\">\r\n                            <template v-slot=\"scope\">\r\n                                <el-button key @click=\"deleteUser(scope.row.id)\" type=\"danger\" text bg>\r\n                                    进入\r\n                                </el-button>\r\n                            </template>\r\n                        </el-table-column>\r\n                    </el-table>\r\n                    <el-pagination v-model:current-page=\"currentPage\" v-model:page-size=\"pageSize\"\r\n                        :page-sizes=\"[100, 200, 300, 400]\" layout=\"total, sizes, prev, pager, next, jumper\"\r\n                        :total=\"total\" @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n                        style=\"margin-top: 10px;\" />\r\n\r\n                </div>\r\n                <div\r\n                    style=\"height: 10%;width:100%;min-height:60px;text-align:center;margin:0 auto;margin-bottom:5%;position:absolute;bottom:10%\">\r\n                    <h2 style=\" margin-bottom: 10px;\">训练网站</h2>\r\n                    <div class=\"website\"></div>\r\n                    <div class=\"website\"></div>\r\n                    <div class=\"website\"></div>\r\n                    <div class=\"website\"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </el-main>\r\n</template>\r\n<script>\r\nimport axios from 'axios';\r\nimport { ElMessage } from 'element-plus';\r\nimport { reactive, ref } from 'vue';\r\n\r\nexport default {\r\n    setup() {\r\n        let dialogVisible = ref(false);\r\n        const currentPage = ref(1);\r\n        const pageSize = ref(100);\r\n        const total = ref(1);\r\n        const contestName = ref('');\r\n        let user = reactive({});\r\n        const contestForm = reactive({\r\n            contestName: '',\r\n            url: ''\r\n        })\r\n        let state = reactive({\r\n            tableData: []\r\n        });\r\n        function getContest() {\r\n            console.log(21313);\r\n\r\n            axios.get('/url/uncontested', {\r\n                params: {\r\n                    userId: user.id,\r\n                    currentPage: currentPage.value,\r\n                    pageSize: pageSize.value,\r\n                    contestName: contestName.value === '' ? null : contestName.value\r\n                }\r\n            })\r\n                .then(res => res.data)\r\n                .then(res => res.data)\r\n                .then(res => {\r\n                    state.tableData = res.list;\r\n                    total.value = res.total\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    ElMessage.error(\"获取补题列表失败\")\r\n                })\r\n        }\r\n        function getUser() {\r\n            return new Promise(() => {\r\n                user = JSON.parse(localStorage.getItem('user'));\r\n        console.log(user);\r\n\r\n            })\r\n        }\r\n        return {\r\n            contestForm,\r\n            state,\r\n            dialogVisible,\r\n            currentPage,\r\n            pageSize,\r\n            total,\r\n            contestName,\r\n            user,\r\n            getContest,\r\n            getUser\r\n        }\r\n    },\r\n    created() {\r\n        this.getUser();\r\n        this.user = JSON.parse(localStorage.getItem('user'));\r\n        \r\n        this.getContest();\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.main {\r\n    background-color: #EEE\r\n}\r\n\r\n.mainBody {\r\n    background-color: white;\r\n    width: 70%;\r\n    min-width: 700px;\r\n    height: 100%;\r\n    margin: 0 auto;\r\n    position: relative;\r\n}\r\n\r\n.myBody {\r\n    position: absolute;\r\n    left: 10%;\r\n    top: 10%;\r\n    width: 80%;\r\n    height: 90%;\r\n}\r\n\r\n.left {\r\n    float: left;\r\n    position: relative;\r\n    place-items: center;\r\n    display: grid;\r\n    left: 0;\r\n    top: -10%;\r\n    width: 30%;\r\n    height: 100%;\r\n}\r\n\r\n.right {\r\n    float: right;\r\n    position: relative;\r\n    right: 0;\r\n    width: 70%;\r\n    height: 100%;\r\n\r\n}\r\n\r\n.grid-content {\r\n    background-color: black;\r\n    padding-left: 0;\r\n    padding-right: 0;\r\n}\r\n\r\n.website {\r\n    display: inline-block;\r\n    height: 100%;\r\n    width: 15%;\r\n    min-width: 70px;\r\n    background-color: black;\r\n    margin-right: 50px;\r\n    border-radius: 10px;\r\n}\r\n\r\n.website:last-child {\r\n    margin-right: 0;\r\n}\r\n</style>\r\n"],"mappings":"AA4FA,OAAOA,KAAI,MAAO,OAAO;AACzB,SAASC,SAAQ,QAAS,cAAc;AACxC,SAASC,QAAQ,EAAEC,GAAE,QAAS,KAAK;AAEnC,eAAe;EACXC,KAAKA,CAAA,EAAG;IACJ,IAAIC,aAAY,GAAIF,GAAG,CAAC,KAAK,CAAC;IAC9B,MAAMG,WAAU,GAAIH,GAAG,CAAC,CAAC,CAAC;IAC1B,MAAMI,QAAO,GAAIJ,GAAG,CAAC,GAAG,CAAC;IACzB,MAAMK,KAAI,GAAIL,GAAG,CAAC,CAAC,CAAC;IACpB,MAAMM,WAAU,GAAIN,GAAG,CAAC,EAAE,CAAC;IAC3B,IAAIO,IAAG,GAAIR,QAAQ,CAAC,CAAC,CAAC,CAAC;IACvB,MAAMS,WAAU,GAAIT,QAAQ,CAAC;MACzBO,WAAW,EAAE,EAAE;MACfG,GAAG,EAAE;IACT,CAAC;IACD,IAAIC,KAAI,GAAIX,QAAQ,CAAC;MACjBY,SAAS,EAAE;IACf,CAAC,CAAC;IACF,SAASC,UAAUA,CAAA,EAAG;MAClBC,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;MAElBjB,KAAK,CAACkB,GAAG,CAAC,kBAAkB,EAAE;QAC1BC,MAAM,EAAE;UACJC,MAAM,EAAEV,IAAI,CAACW,EAAE;UACff,WAAW,EAAEA,WAAW,CAACgB,KAAK;UAC9Bf,QAAQ,EAAEA,QAAQ,CAACe,KAAK;UACxBb,WAAW,EAAEA,WAAW,CAACa,KAAI,KAAM,EAAC,GAAI,IAAG,GAAIb,WAAW,CAACa;QAC/D;MACJ,CAAC,EACIC,IAAI,CAACC,GAAE,IAAKA,GAAG,CAACC,IAAI,EACpBF,IAAI,CAACC,GAAE,IAAKA,GAAG,CAACC,IAAI,EACpBF,IAAI,CAACC,GAAE,IAAK;QACTX,KAAK,CAACC,SAAQ,GAAIU,GAAG,CAACE,IAAI;QAC1BlB,KAAK,CAACc,KAAI,GAAIE,GAAG,CAAChB,KAAI;MAC1B,CAAC,EACAmB,KAAK,CAACC,GAAE,IAAK;QACVZ,OAAO,CAACC,GAAG,CAACW,GAAG,CAAC;QAChB3B,SAAS,CAAC4B,KAAK,CAAC,UAAU;MAC9B,CAAC;IACT;IACA,SAASC,OAAOA,CAAA,EAAG;MACf,OAAO,IAAIC,OAAO,CAAC,MAAM;QACrBrB,IAAG,GAAIsB,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;QACvDnB,OAAO,CAACC,GAAG,CAACP,IAAI,CAAC;MAEb,CAAC;IACL;IACA,OAAO;MACHC,WAAW;MACXE,KAAK;MACLR,aAAa;MACbC,WAAW;MACXC,QAAQ;MACRC,KAAK;MACLC,WAAW;MACXC,IAAI;MACJK,UAAU;MACVe;IACJ;EACJ,CAAC;EACDM,OAAOA,CAAA,EAAG;IACN,IAAI,CAACN,OAAO,CAAC,CAAC;IACd,IAAI,CAACpB,IAAG,GAAIsB,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;IAEpD,IAAI,CAACpB,UAAU,CAAC,CAAC;EACrB;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}