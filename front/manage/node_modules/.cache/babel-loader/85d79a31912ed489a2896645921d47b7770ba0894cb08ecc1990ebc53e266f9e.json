{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, reactive } from 'vue';\n// Element-Plus的依赖采用的是自动导入，所以这里无需显示的引入，其他地方的element-plus引用同理\n// import { ElMessage } from 'element-plus';\n// import request from '@/utils/request';      //这里使用自行封装的axios，下文已给出，照搬后修改运行端口即可\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\n\n// const checkCodeUrl = \"api/checkCode?\" + new Date().getTime();\n//表单\n\nexport default {\n  __name: 'Login',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const formDataRef = ref();\n    let formData = reactive({\n      username: \"\",\n      password: \"\"\n    });\n    const rules = {\n      username: [{\n        required: true,\n        message: \"请输入用户名\"\n      }],\n      password: [{\n        required: true,\n        message: \"请输入密码\"\n      }]\n      // checkCode: [{\n      //     required: true,\n      //     message: \"请输入验证码\"\n      // }],\n    };\n    const router = useRouter();\n    const login = () => {\n      var form_obj = JSON.parse(JSON.stringify(formData));\n      request.post(\"/user/login\", form_obj).then(res => {\n        if (res) {\n          ElMessage({\n            message: '登录成功',\n            type: 'success'\n          });\n          let tokenObj = {\n            token: \" isLogin\",\n            startTime: new Date().getTime()\n          };\n          window.localStorage.setItem(\"isLogin\", JSON.stringify(tokenObj));\n          localStorage.setItem(\"username\", JSON.parse(JSON.stringify(formData.username)));\n          router.push(\"/\");\n        } else {\n          ElMessage.error('账号或密码错误！！！登录失败！！！');\n        }\n      });\n    };\n    const __returned__ = {\n      formDataRef,\n      get formData() {\n        return formData;\n      },\n      set formData(v) {\n        formData = v;\n      },\n      rules,\n      router,\n      login,\n      ref,\n      reactive,\n      get useRouter() {\n        return useRouter;\n      },\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","useRouter","axios","formDataRef","formData","username","password","rules","required","message","router","login","form_obj","JSON","parse","stringify","request","post","then","res","ElMessage","type","tokenObj","token","startTime","Date","getTime","window","localStorage","setItem","push","error"],"sources":["C:/Users/18725/Desktop/集训队管理系统开发/manage/front/manage/src/views/Login.vue"],"sourcesContent":["<template>\r\n    <div class=\"login-body\">\r\n        <div class=\"login-panel\">\r\n            <div class=\"login-title\">用户登录</div>\r\n            <el-form :model=\"formData\" :rules=\"rules\" ref=\"formDataRef\">\r\n                <el-form-item prop=\"username\">\r\n                    <el-input placeholder=\"请输入账号\" v-model=\"formData.username\" size=\"large\" type=\"text\">\r\n                        <template #prefix>\r\n                            <el-icon>\r\n                                <i-ep-user />\r\n                            </el-icon>\r\n                        </template>\r\n                    </el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"password\">\r\n                    <el-input placeholder=\"请输入密码\" v-model=\"formData.password\" size=\"large\" type=\"password\"\r\n                        @keydown.enter=\"login()\">\r\n                        <template #prefix>\r\n                            <el-icon>\r\n                                <i-ep-lock />\r\n                            </el-icon>\r\n                        </template>\r\n                    </el-input>\r\n                </el-form-item>\r\n                <!-- <el-form-item label=\"\">\r\n                    <div class=\"check-code-panel\">\r\n                        <el-input placeholder=\"请输入验证码\" v-model=\"formData.checkCode\" class=\"input-panel\" />\r\n                        <img src=\"checkCodeUrl\" class=\"check-code\">\r\n                    </div>\r\n                </el-form-item> -->\r\n                <!-- <el-form-item label=\"\">\r\n                    <el-checkbox label=\"记住密码\" name=\"type\" />\r\n                </el-form-item> -->\r\n                <el-form-item label=\"\">\r\n                    <el-button type=\"primary\" style=\"width: 100%;\" @click=\"login()\" size=\"large\">登录</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n    </div>\r\n</template>\r\n​\r\n<script setup>\r\nimport { ref, reactive } from 'vue'\r\n// Element-Plus的依赖采用的是自动导入，所以这里无需显示的引入，其他地方的element-plus引用同理\r\n// import { ElMessage } from 'element-plus';\r\n// import request from '@/utils/request';      //这里使用自行封装的axios，下文已给出，照搬后修改运行端口即可\r\nimport { useRouter } from 'vue-router';\r\nimport axios from 'axios';\r\n\r\n\r\n// const checkCodeUrl = \"api/checkCode?\" + new Date().getTime();\r\n//表单\r\nconst formDataRef = ref();\r\nlet formData = reactive({\r\n    username: \"\",\r\n    password: \"\"\r\n});\r\nconst rules = {\r\n    username: [{\r\n        required: true,\r\n        message: \"请输入用户名\"\r\n    }],\r\n    password: [{\r\n        required: true,\r\n        message: \"请输入密码\"\r\n    }],\r\n    // checkCode: [{\r\n    //     required: true,\r\n    //     message: \"请输入验证码\"\r\n    // }],\r\n}\r\n\r\nconst router = useRouter();\r\n\r\nconst login = () => {\r\n    \r\n    var form_obj = JSON.parse(JSON.stringify(formData));\r\n\r\n    request.post(\"/user/login\", form_obj).then(res => {\r\n        if (res) {\r\n            ElMessage({\r\n                message: '登录成功',\r\n                type: 'success',\r\n            })\r\n\r\n            let tokenObj = { token: \" isLogin\", startTime: new Date().getTime() };\r\n            window.localStorage.setItem(\"isLogin\", JSON.stringify(tokenObj));\r\n            localStorage.setItem(\"username\", JSON.parse(JSON.stringify(formData.username)));\r\n\r\n            router.push(\"/\");\r\n\r\n        } else {\r\n            ElMessage.error('账号或密码错误！！！登录失败！！！')\r\n        }\r\n    });\r\n\r\n\r\n\r\n};\r\n</script>\r\n​\r\n<style scoped>\r\n.login-body {\r\n    background: url(\"../assets/bac.jpg\") no-repeat center center;\r\n    height: 100%;\r\n    width: 100%;\r\n    background-size: cover;\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n}\r\n\r\n.login-title {\r\n    font-size: 22px;\r\n    text-align: center;\r\n    margin-bottom: 22px;\r\n}\r\n\r\n.login-panel {\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    margin: auto;\r\n    padding: 25px;\r\n    width: 26%;\r\n    min-width: 460px;\r\n    height: 30%;\r\n    min-height: 300px;\r\n    background: rgba(255, 255, 255, 0.6);\r\n    border-radius: 5%;\r\n    box-shadow: 2px 2px 10px #ddd;\r\n}\r\n</style>"],"mappings":";AA0CA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAK;AACnC;AACA;AACA;AACA,SAASC,SAAS,QAAQ,YAAY;AACtC,OAAOC,KAAK,MAAM,OAAO;;AAGzB;AACA;;;;;;;;IACA,MAAMC,WAAW,GAAGJ,GAAG,CAAC,CAAC;IACzB,IAAIK,QAAQ,GAAGJ,QAAQ,CAAC;MACpBK,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE;IACd,CAAC,CAAC;IACF,MAAMC,KAAK,GAAG;MACVF,QAAQ,EAAE,CAAC;QACPG,QAAQ,EAAE,IAAI;QACdC,OAAO,EAAE;MACb,CAAC,CAAC;MACFH,QAAQ,EAAE,CAAC;QACPE,QAAQ,EAAE,IAAI;QACdC,OAAO,EAAE;MACb,CAAC;MACD;MACA;MACA;MACA;IACJ,CAAC;IAED,MAAMC,MAAM,GAAGT,SAAS,CAAC,CAAC;IAE1B,MAAMU,KAAK,GAAGA,CAAA,KAAM;MAEhB,IAAIC,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACX,QAAQ,CAAC,CAAC;MAEnDY,OAAO,CAACC,IAAI,CAAC,aAAa,EAAEL,QAAQ,CAAC,CAACM,IAAI,CAACC,GAAG,IAAI;QAC9C,IAAIA,GAAG,EAAE;UACLC,SAAS,CAAC;YACNX,OAAO,EAAE,MAAM;YACfY,IAAI,EAAE;UACV,CAAC,CAAC;UAEF,IAAIC,QAAQ,GAAG;YAAEC,KAAK,EAAE,UAAU;YAAEC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC;UAAE,CAAC;UACrEC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,SAAS,EAAEhB,IAAI,CAACE,SAAS,CAACO,QAAQ,CAAC,CAAC;UAChEM,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEhB,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACX,QAAQ,CAACC,QAAQ,CAAC,CAAC,CAAC;UAE/EK,MAAM,CAACoB,IAAI,CAAC,GAAG,CAAC;QAEpB,CAAC,MAAM;UACHV,SAAS,CAACW,KAAK,CAAC,mBAAmB,CAAC;QACxC;MACJ,CAAC,CAAC;IAIN,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}